(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{568:function(t,e,l){"use strict";l.r(e);var a=l(43),o=Object(a.a)({},(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[l("h2",{attrs:{id:"ubuntu-gitlab-安装配置使用"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-gitlab-安装配置使用"}},[t._v("#")]),t._v(" ubuntu gitlab 安装配置使用")]),t._v(" "),l("h3",{attrs:{id:"安装"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),l("ul",[l("li",[l("p",[t._v("安装必须的一些依赖")]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo apt-get install -y curl openssh-server ca-certificates")])])])]),t._v(" "),l("li",[l("p",[t._v("安装 Postfix 发送通知邮件")]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo apt-get install -y postfix")])])])]),t._v(" "),l("li",[l("p",[t._v("官方源安装 gitlab")]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash")]),l("br"),t._v(" "),l("code",[t._v("sudo apt-get install gitlab-ce")])])])]),t._v(" "),l("li",[l("p",[t._v("国内源安装 gitlab")]),t._v(" "),l("blockquote",[l("p",[t._v("信任 GitLab 的 GPG 公钥（配置 git 的公钥，如果不信任公钥，无法配置清华大学的镜像路径，切记）:\n"),l("code",[t._v("curl https://packages.gitlab.com/gpg.key 2> /dev/null | sudo apt-key add - &>/dev/null")]),t._v("\n配置镜像路径（由于 git 官网是国外的服务器，所以配置清华大学的镜像路径）")])])])]),t._v(" "),l("blockquote",[l("p",[t._v("切换到 root 用户，打开下面文件；将下边的信息添加到文档中（详见 Gitlab Community Edition 镜像使用帮助）"),l("br"),t._v("\nvi /etc/apt/sources.list.d/gitlab-ce.list 　　--打开文件"),l("br"),t._v("\ndeb https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu xenial main 　　--添加国内安装源\n国内源安装 gitlab-ce"),l("br"),t._v(" "),l("code",[t._v("sudo apt-get install gitlab-ce")]),t._v("　　--安装")])]),t._v(" "),l("ul",[l("li",[l("p",[t._v("修改端口号")]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo vi /etc/gitlab/gitlab.rb")]),t._v("\n将 "),l("code",[t._v("external_url 'http://gitlab.example.com'")]),t._v(" 改为 "),l("code",[t._v("external_url 'http://ip:port'")])])])]),t._v(" "),l("li",[l("p",[t._v("更新配置")]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl reconfigure")]),t._v("\n在执行配置的时候 sudo gitlab-ctl reconfigure 的时候往往会出现：ruby_block[supervise_redis_sleep] action run，出现会一直卡无法往下进行！"),l("br"),t._v("\n1、按住 CTRL+C 强制结束；"),l("br"),t._v("\n2、运行：sudo systemctl restart gitlab-runsvdir"),l("br"),t._v("\n3、再次执行：sudo gitlab-ctl reconfigure")])])]),t._v(" "),l("li",[l("p",[t._v("启动")]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl start")])])])])]),t._v(" "),l("h3",{attrs:{id:"使用"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),l("ul",[l("li",[t._v("启动\n"),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl start")])])])]),t._v(" "),l("li",[t._v("停止\n"),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl stop")])])])]),t._v(" "),l("li",[t._v("重启\n"),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl restart")])])])]),t._v(" "),l("li",[t._v("查看状态\n"),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl status")])])])]),t._v(" "),l("li",[t._v("确认配置（修改配置后，必须执行）\n"),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl reconfigure")])])])]),t._v(" "),l("li",[t._v("查看日志\n"),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl tail")])])])]),t._v(" "),l("li",[t._v("查看 GitLab 版本号\n"),l("blockquote",[l("p",[l("code",[t._v("cat /opt/gitlab/embedded/service/gitlab-rails/VERSION")])])])])]),t._v(" "),l("h3",{attrs:{id:"卸载"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[t._v("#")]),t._v(" 卸载")]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo gitlab-ctl uninstall")])])]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo dpkg -r gitlab-ce")])])]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("sudo rpm -e gitlab-ce")])])]),t._v(" "),l("blockquote",[l("p",[l("code",[t._v("reboot（重启）")])])]),t._v(" "),l("h3",{attrs:{id:"问题"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),l("h4",{attrs:{id:"_1-安装gitlab服务器后登录报错502解决办法"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装gitlab服务器后登录报错502解决办法"}},[t._v("#")]),t._v(" 1. 安装Gitlab服务器后登录报错502解决办法")])])}),[],!1,null,null,null);e.default=o.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{459:function(e,t,a){"use strict";a.r(t);var n=a(43),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"lerna"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna"}},[e._v("#")]),e._v(" lerna")]),e._v(" "),a("h3",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[e._v("#")]),e._v(" 简介")]),e._v(" "),a("blockquote",[a("p",[e._v("Lerna 是一个管理工具，用于管理包含多个软件包（package）的 JavaScript 项目。")])]),e._v(" "),a("blockquote",[a("p",[e._v("网址："),a("a",{attrs:{href:"https://lernajs.bootcss.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://lernajs.bootcss.com/"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),a("ul",[a("li",[e._v("1.安装")])]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("npm install lerna -g")])])]),e._v(" "),a("ul",[a("li",[e._v("2.流程")])]),e._v(" "),a("blockquote",[a("p",[e._v("初始化项目->提交代码->发布")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("3.操作步骤")]),e._v(" "),a("ol",[a("li",[e._v("先在 gitee 上建一个 git 仓库，git clone 下来")]),e._v(" "),a("li",[e._v("lerna init 初始化项目，然后在 package 下建立 roninwz-demo1 文件夹，运行 npm init -y")]),e._v(" "),a("li",[e._v("修改根目录下 package.json，配置 repository"),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"repository"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://gitee.com/roninwz/lerna-demo.git"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])])]),e._v(" "),a("li",[e._v("提交代码到 git")]),e._v(" "),a("li",[e._v("nrm 切换源到 npm，"),a("code",[e._v("nrm ls")]),e._v(" "),a("code",[e._v("nrm use npm")])]),e._v(" "),a("li",[e._v("npm login 输入用户名密码，（刚注册得账户需 npm 官网验证邮箱）")]),e._v(" "),a("li",[e._v("lerna publish")])])])]),e._v(" "),a("h3",{attrs:{id:"lerna-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lerna-命令"}},[e._v("#")]),e._v(" lerna 命令")]),e._v(" "),a("ul",[a("li",[e._v("1.lerna init (初始化项目)")])]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("lerna init")])])]),e._v(" "),a("blockquote",[a("p",[e._v("参数：--independent/-i – 使用独立的 版本控制模式。\n两种模式：")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("(1) 默认为固定模式(Fixed mode)")]),e._v(" "),a("blockquote",[a("p",[e._v("固定模式中，packages 下的所有包共用一个版本号(version)，会自动将所有的包绑定到一个版本号上(该版本号也就是 lerna.json 中的 version 字段)，所以任意一个包发生了更新，这个共用的版本号就会发生改变。")])])]),e._v(" "),a("li",[a("p",[e._v("(2) -i 独立模式(Fixed mode)")]),e._v(" "),a("blockquote",[a("p",[e._v("独立模式允许每一个包有一个独立的版本号，在使用 lerna publish 命令时，可以为每个包单独制定具体的操作，同时可以只更新某一个包的版本号。此种模式时，lerna.json 中的 version 字段指定为 independent 即可。")])])])]),e._v(" "),a("ul",[a("li",[e._v("lerna bootstrap")])]),e._v(" "),a("blockquote",[a("p",[e._v("为所有项目安装依赖，类似于 npm/yarn i")])]),e._v(" "),a("ul",[a("li",[e._v("lerna import pathToRepo")])]),e._v(" "),a("blockquote",[a("p",[e._v("将本地路径 pathToRepo 中的软件包导入（import） packages/directory-name 中并提交 commit。")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("lerna publish")])]),e._v(" "),a("li",[a("p",[e._v("lerna changed")])])]),e._v(" "),a("blockquote",[a("p",[e._v("检查自上次发布以来哪些软件包被修改过。")])]),e._v(" "),a("ul",[a("li",[e._v("lerna diff package?")])]),e._v(" "),a("blockquote",[a("p",[e._v("列出所有或某个软件包自上次发布以来的修改情况。")])]),e._v(" "),a("ul",[a("li",[e._v("lerna run script")])]),e._v(" "),a("blockquote",[a("p",[e._v("在每一个包含 script 脚本的软件包中运行此 npm 脚本。")])]),e._v(" "),a("ul",[a("li",[e._v("lerna ls(列出当前 Lerna 仓库中的所有公共软件包)")])]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("lerna ls")])])]),e._v(" "),a("ul",[a("li",[e._v("参考链接")])]),e._v(" "),a("blockquote",[a("p",[e._v("lerna 管理前端 packages 的最佳实践 "),a("a",{attrs:{href:"http://www.sosout.com/2018/07/21/lerna-repo.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.sosout.com/2018/07/21/lerna-repo.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);